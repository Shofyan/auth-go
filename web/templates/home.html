<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auth Service - Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f7fa;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        .feature-card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .feature-card h2 {
            color: #667eea;
            margin-top: 0;
        }
        .feature-card ul {
            list-style: none;
            padding: 0;
        }
        .feature-card li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .feature-card li:before {
            content: "‚úì ";
            color: #667eea;
            font-weight: bold;
        }
        .cta {
            text-align: center;
            margin: 40px 0;
        }
        .button {
            display: inline-block;
            padding: 15px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            margin: 10px;
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .demo-section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin: 20px 0;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>üîê Authentication Service with HTMX</h1>
    <p style="text-align: center; font-size: 18px; color: #666;">
        A modern, secure authentication system built with Go and HTMX
    </p>

    <div class="cta">
        <a href="/web/login" class="button">Login</a>
        <a href="/web/register" class="button">Register</a>
        <a href="#" onclick="checkHealth(); return false;" class="button" style="background: #48bb78;">Health Check</a>
    </div>

    <div id="health-status" style="text-align: center; margin: 20px 0; display: none;">
        <div style="background: white; padding: 20px; border-radius: 8px; display: inline-block; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
            <h3 style="margin: 0 0 10px 0;">Health Status</h3>
            <p id="health-message" style="margin: 0; font-size: 18px;"></p>
        </div>
    </div>

    <script>
        async function checkHealth() {
            const statusDiv = document.getElementById('health-status');
            const messageEl = document.getElementById('health-message');
            
            statusDiv.style.display = 'block';
            messageEl.innerHTML = 'üîÑ Checking...';
            messageEl.style.color = '#666';
            
            try {
                const response = await fetch('/health');
                if (response.ok) {
                    const data = await response.json();
                    messageEl.innerHTML = '‚úÖ Server is healthy!';
                    messageEl.style.color = '#48bb78';
                } else {
                    messageEl.innerHTML = '‚ùå Server is unhealthy';
                    messageEl.style.color = '#e53e3e';
                }
            } catch (error) {
                messageEl.innerHTML = '‚ùå Cannot connect to server';
                messageEl.style.color = '#e53e3e';
            }
            
            // Hide after 3 seconds
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 3000);
        }
    </script>

    <div class="feature-grid">
        <div class="feature-card">
            <h2>üåê Web Interface</h2>
            <ul>
                <li>HTMX-powered UI</li>
                <li>No page reloads</li>
                <li>Responsive design</li>
                <li>Dynamic updates</li>
                <li>Real-time feedback</li>
            </ul>
        </div>

        <div class="feature-card">
            <h2>üîí Security Features</h2>
            <ul>
                <li>JWT authentication</li>
                <li>Token rotation</li>
                <li>Bcrypt hashing</li>
                <li>Token reuse detection</li>
                <li>RBAC support</li>
            </ul>
        </div>

        <div class="feature-card">
            <h2>üèóÔ∏è Architecture</h2>
            <ul>
                <li>Clean Architecture</li>
                <li>Domain-Driven Design</li>
                <li>Repository pattern</li>
                <li>Use case driven</li>
                <li>Testable code</li>
            </ul>
        </div>
    </div>

    <div class="demo-section">
        <h2>üì° API Endpoints</h2>
        <p>The following REST API endpoints are available:</p>
        
        <h3>Public Endpoints</h3>
        <ul>
            <li><code>POST /api/v1/auth/register</code> - Register new user</li>
            <li><code>POST /api/v1/auth/login</code> - User login</li>
            <li><code>POST /api/v1/auth/refresh</code> - Refresh access token</li>
        </ul>

        <h3>Protected Endpoints (Requires Authentication)</h3>
        <ul>
            <li><code>GET /api/v1/auth/profile</code> - Get user profile</li>
            <li><code>POST /api/v1/auth/logout</code> - User logout</li>
            <li><code>GET /api/v1/admin/users</code> - Admin only endpoint</li>
        </ul>

        <h3>Web Pages</h3>
        <ul>
            <li><code>GET /web/login</code> - Login page</li>
            <li><code>GET /web/register</code> - Registration page</li>
            <li><code>GET /web/dashboard</code> - User dashboard (protected)</li>
            <li><code>GET /web/profile</code> - User profile (protected)</li>
        </ul>
    </div>

    <div class="demo-section">
        <h2>üöÄ Quick Test</h2>
        <p>Try registering a new account:</p>
        <pre>curl -X POST http://localhost:8080/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"demo@example.com","password":"password123"}'</pre>

        <p>Then login:</p>
        <pre>curl -X POST http://localhost:8080/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"demo@example.com","password":"password123"}'</pre>

        <p>Or use the web interface above! üëÜ</p>
    </div>

    <div class="demo-section">
        <h2>üí° Technology Stack</h2>
        <ul>
            <li><strong>Backend:</strong> Go 1.21+</li>
            <li><strong>Database:</strong> PostgreSQL</li>
            <li><strong>Frontend:</strong> HTMX + Vanilla JavaScript</li>
            <li><strong>Auth:</strong> JWT (go-jwt) + Bcrypt</li>
            <li><strong>Architecture:</strong> Clean Architecture + DDD</li>
        </ul>
    </div>

    <div style="text-align: center; margin-top: 40px; padding: 20px; color: #666;">
        <p>Built with ‚ù§Ô∏è using Go, HTMX, and Clean Architecture principles</p>
        <p>
            <a href="https://github.com/htmx/htmx" target="_blank" style="color: #667eea;">Learn more about HTMX</a>
        </p>
    </div>
</body>
</html>
